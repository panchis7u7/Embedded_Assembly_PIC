#INCLUDE <P16F887.INC>
    LIST P=16F887
; CONFIG1
; __config 0xFFE1
 __CONFIG _CONFIG1, _FOSC_HS & _WDTE_OFF & _PWRTE_ON & _MCLRE_ON & _CP_OFF & _CPD_OFF & _BOREN_ON & _IESO_ON & _FCMEN_ON & _LVP_ON
; CONFIG2
; __config 0xFFFF
 __CONFIG _CONFIG2, _BOR4V_BOR40V & _WRT_OFF
 
 udata
 BYTES RES 3
 
 CBLOCK
 C1
 ENDC
 
 ORG 0
SETUP:
    MOVLW 0x80
    MOVWF BYTES
    MOVLW 0xA2
    MOVWF BYTES+1
    MOVLW 0x5D
    MOVWF BYTES+2
    BSF STATUS,RP0
    BCF STATUS,RP1
    CLRF TRISB
    CLRF PORTC
    CLRF TRISD
    BSF TRISA,4
    BCF STATUS,RP0
    CLRF PORTB
    CLRF PORTC
    CLRF PORTD
PROGRAMA:
    MOVFW BYTES
    MOVWF PORTB
    MOVFW BYTES+1
    MOVWF PORTD
    MOVFW BYTES+2
    MOVWF PORTC
REC:
    BTFSC PORTA,4
    GOTO ACT_RLF
    GOTO REC
ACT_RLF:
    BTFSC PORTA,4
    GOTO ACT_RLF
    RLF BYTES+2, 1
    RLF BYTES+1, 1
    RLF BYTES, 1
    BCF BYTES+2,0
    GOTO PROGRAMA
 END