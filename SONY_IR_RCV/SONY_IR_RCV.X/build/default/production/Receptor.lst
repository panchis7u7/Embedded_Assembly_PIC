MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 #INCLUDE <P16F887.INC>
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Oct 24 2019
                      00005 ;  MPASM PIC16F887 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2019 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      00810         LIST
Warning[205]: Found directive in column 1. (LIST)
                      00002 LIST P=16F887
                      00003 #INCLUDE <MACROS.INC>
  00000005            00001 puertoa EQU PORTA
  00000006            00002 puertob EQU PORTB
  00000007            00003 puertoc EQU PORTC
  00000008            00004 puertod EQU PORTD
  00000009            00005 puertoe EQU PORTE
                      00006 
                      00007 ;-------------------------------- MACRO PINES ----------------------------------
                      00008 ON MACRO PIN,PORT
                      00009         BSF PORT,PIN
                      00010         ENDM
                      00011 OFF MACRO PIN,PORT
                      00012         BCF PORT,PIN
                      00013         ENDM
                      00014 SETF MACRO REG0
                      00015         MOVLW D'255'
                      00016         MOVWF REG0
                      00017         ENDM
                      00018 
                      00019 ;--------------------------------- MACRO REG -----------------------------------
                      00020 MOV_VAL MACRO VALUE,REG
                      00021         MOVLW VALUE
                      00022         MOVWF REG
                      00023         ENDM
                      00024 
                      00025 COPY_REG MACRO REG_SRC,REG_DEST
                      00026         MOVF REG_SRC,0
                      00027         MOVWF REG_DEST
                      00028         ENDM
                      00029 
                      00030 ;--------------------------------- MACRO REG -----------------------------------
                      00031 SEL_BANK MACRO NO_BANK
                      00032         IF NO_BANK==0
                      00033         BCF STATUS, RP0
                      00034         BCF STATUS, RP1
                      00035         ENDIF
                      00036 
                      00037         IF NO_BANK==1
                      00038         BSF STATUS, RP0
                      00039         BCF STATUS, RP1
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00040         ENDIF
                      00041 
                      00042         IF NO_BANK==2
                      00043         BCF STATUS, RP0
                      00044         BSF STATUS, RP1
                      00045         ENDIF
                      00046 
                      00047         IF NO_BANK==3
                      00048         BSF STATUS, RP0
                      00049         BSF STATUS, RP1
                      00050         ENDIF
                      00051         ENDM
                      00052 
                      00053 ;----------------------------- REG COMPARE EQUAL -------------------------------
                      00054 REG_EQUAL_JMP MACRO REG1,REG2,LABEL
                      00055         MOVF    REG2,0
                      00056         SUBWF   REG1,0
                      00057         BTFSC   STATUS,Z
                      00058         GOTO    LABEL
                      00059         ENDM
                      00060 ;---------------------------- REG COMPARE !EQUAL -------------------------------
                      00061 REG_NE_JMP MACRO REG1,REG2,LABEL
                      00062         MOVF    REG2,0
                      00063         SUBWF   REG1,0
                      00064         BTFSC   STATUS,Z
                      00065         GOTO    LABEL
                      00066         ENDM
                      00067 
                      00068 ;-------------------------- REG COMPARE EQUAL VALUE ----------------------------
                      00069 REG_VAL_EQ_JMP MACRO REG1,VAL,DIR
                      00070         MOVLW   VAL
                      00071         SUBWF   REG1,0
                      00072         BTFSC   STATUS,Z
                      00073         GOTO    DIR
                      00074         ENDM
                      00075         
                      00076 ;------------------------- REG COMPARE EQUAL !VALUE ----------------------------
                      00077 REG_VAL_NEQ_JMP MACRO REG1,VAL,DIR
                      00078         MOVLW VAL
                      00079         SUBWF REG1,0
                      00080         BTFSS STATUS,Z
                      00081         GOTO DIR
                      00082         ENDM
                      00083 
                      00084 ; Compara registro con un valor y si  se cumple la condicion Reg>valor se va a la subrutina
                      00085 mayorque macro registro1,valor ,subrutina
                      00086                 MOVLW valor
                      00087                 SUBWF registro1,0
                      00088                 BTFSC STATUS,C
                      00089                 GOTO subrutina
Warning[205]: Found directive in column 1. (endm)
                      00090 endm
                      00091 ; Compara registro con un valor y si  se cumple la condicion Reg<valor se va a la subrutina
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00092 menorque macro registro1,valor ,subrutina
                      00093                 MOVLW valor
                      00094                 SUBWF registro1,0
                      00095                 BTFSS STATUS,C
                      00096                 GOTO subrutina
Warning[205]: Found directive in column 1. (endm)
                      00097 endm
                      00098 ; Compara registro con un valor y si se cumple la condicion Reg>Reg2se va a la subrutina
                      00099 mayorquereg macro registro1,registro2 ,subrutina
                      00100                 MOVF registro2,0
                      00101                 SUBWF registro1,0
                      00102                 BTFSC STATUS,C
                      00103                 GOTO subrutina
Warning[205]: Found directive in column 1. (endm)
                      00104 endm
                      00105 ; Compara registro con un valor y si se cumple la condicion Reg<Reg2 se va a la subrutina
                      00106 menorquereg macro registro1,registro2,subrutina
                      00107                 MOVF registro2,0
                      00108                 SUBWF registro1,0
                      00109                 BTFSS STATUS,C
                      00110                 GOTO subrutina
Warning[205]: Found directive in column 1. (endm)
                      00111 endm
                      00112 
                      00113 ; /////////////////////////////////// Para display 7 segmentos //////////////////////////////
                      00114 enviaradisplay macro numnum
                      00115         MOVLW numnum
                      00116         CALL TABLAANODO
                      00117         MOVWF PORTD
Warning[205]: Found directive in column 1. (endm)
                      00118 endm
                      00119         
                      00120 enviarcdisplay macro numnum
                      00121         MOVLW numnum
                      00122         CALL TABLACATODO
                      00123         MOVWF PORTD
Warning[205]: Found directive in column 1. (endm)
                      00124 endm
                      00125 
                      00126 registroadisplay macro numnum
                      00127         MOVF numnum,0
                      00128         CALL TABLAANODO
                      00129         MOVWF PORTD
Warning[205]: Found directive in column 1. (endm)
                      00130 endm
                      00131 
                      00132 registrocdisplay macro numnum
                      00133         MOVF numnum,0
                      00134         CALL TABLACATODO
                      00135         MOVWF PORTD
Warning[205]: Found directive in column 1. (endm)
                      00136 endm
                      00137 ;...............................................///////////////////////////////////.....................
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ..../////////////////////////
                      00138 on_lib_retardos_ms macro
                      00139         CALL CONFTMR0TEMP
Warning[205]: Found directive in column 1. (endm)
                      00140 endm
                      00141 
                      00142 retardo_ms macro valor
                      00143         MOVLW valor
                      00144         CALL RETARDOLIBRE_mS
Warning[205]: Found directive in column 1. (endm)
                      00145 endm
                      00146 
                      00147 ;Conversor de Binario a BCD. La respuesta se guarda en registros bcd_unidad, bcd_decena, bcd_centena
                      00148 BCD_CONVERT MACRO REG
                      00149         MOVF REG,0
                      00150         CALL BINARIO_BCD
                      00151     ENDM
                      00152 
                      00153 ;Codigo de macro para Retardos
                      00154 milisegundo      macro X
                      00155                          movlw X
                      00156                          call  milisegundos
                      00157                          endm
                      00158 segundo          macro X
                      00159                          movlw X
                      00160                          call  segundos
                      00161                          endm
                      00162 ;//////////////////////////////////////////////////////////////////////////////
                      00163 ; Macro para LCD Información sobre comandos en www.rodrigocarita.com
                      00164 ; Para controlar la pantalla LCD 2x16
                      00165 
                      00166 LCD_INIT MACRO                  ;Con esto desarrollamos la secuencia de inicio               
                      00167         CALL  Inicio_lcd
                      00168         ENDM
                      00169 WRITE_LCD MACRO CHAR            ;Con este comando enviaremos un caracter a la pantalla
                      00170         MOVLW CHAR
                      00171         CALL  ESCRIBIRCARACTER  ;Subrutina en la librería que me permite enviar el caracter
                      00172         ENDM
                      00173 WRITE_LCD_REG MACRO REG4        ;Con este comando enviaremos el valor de un registro a la pantalla
                      00174         MOVLW .48
                      00175         ADDWF REG4,0
                      00176         CALL  ESCRIBIRCARACTER   ;Subrutina en la librería que me permite enviar el valor
                      00177         ENDM
                      00178 WRITE_LCD_REG_HEX MACRO REG4    ;Con este comando enviaremos el valor de un registro a la pantalla
                      00179         MOVLW .55
                      00180         ADDWF REG4,0
                      00181         CALL  ESCRIBIRCARACTER   ;Subrutina en la librería que me permite enviar el valor
                      00182         ENDM
                      00183 escribirregistro macro regREG3d     ;Subrutina para escribir en el LCD registro de 3 dígitos
                      00184                    MOVF regREG3d,0
                      00185                    CALL PARAESCR1B1RREGISTRO
Warning[205]: Found directive in column 1. (endm)
                      00186 endm
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00187 escribirmensaje macro
                      00188                         CLRF indice
                      00189                         SEcuENCIASUBcar1
                      00190                         MOVF indice,0
                      00191                         CALL aasdd
                      00192                         MOVWF NumCadena
                      00193                         csi NumCadena,.255,FUERALIM1T3
                      00194                         MOVF NumCadena,0
                      00195                         call  ESCRIBIRCARACTER
                      00196                         INCF indice,1
                      00197                         GOTO SEcuENCIASUBcar1
                      00198     ENDM           
                      00199            
                      00200 ;Aquí las macros para manipulación del cursor //////////////////////////////////////////
                      00201 CURSOR_ON MACRO
                      00202         MOVLW on_display_cursor_blink ;Enciende el cursor y su parpadeo
                      00203         CALL  ESCRIBIRCOMANDO
                      00204     ENDM
                      00205 CURSOR_OFF MACRO
                      00206         MOVLW solo_display        ;Apaga el cursor y muestra solamente el display
                      00207         CALL  ESCRIBIRCOMANDO
                      00208     ENDM
                      00209 CURSOR_LEFT MACRO
                      00210         MOVLW mover_cursor_izquierda ;Mueve el cursor a la derecha
                      00211         call  ESCRIBIRCOMANDO
                      00212     ENDM
                      00213 cursor_derecha macro
                      00214                 movlw mover_cursor_derecha ;Mueve el cursor a la izquierda
                      00215         call  ESCRIBIRCOMANDO
                      00216                 endm
                      00217            
                      00218 fila_enter     macro    ;Saltará de línea a la segunda fila
                      00219            movlw salto_enter
                      00220            call  ESCRIBIRCOMANDO
Warning[205]: Found directive in column 1. (endm)
                      00221 endm
                      00222 ORIGIN_LCD macro
                      00223                 movlw home_inicio
                      00224                 call ESCRIBIRCOMANDO
Warning[205]: Found directive in column 1. (endm)
                      00225 endm
                      00226 ;//////////////////////////////////////////////////////
                      00227 ;//////////////////////////////////////// creado para la escritura en LCD mediante textos predeterminado
                            s.///////////
                      00228 mensaje macro  x
                      00229         if x==.1
                      00230         call SubirCarActer1
                      00231         endif
                      00232         if x==.2
                      00233         call SubirCarActer2
                      00234         endif
                      00235                 if x==.3
                      00236         call SubirCarActer3
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00237         endif
                      00238                 if x==.4
                      00239         call SubirCarActer4
                      00240         endif
                      00241                 if x==.5
                      00242         call SubirCarActer5
                      00243         endif
                      00244                 if x==.6
                      00245         call SubirCarActer6
                      00246         endif
                      00247                 if x>.6
                      00248                 ERROR "No hay mensaje predeterminado para el valor"
                      00249                 MESSG "Revisa el comando mensjae .x"
                      00250                 endif
                      00251         endm
                      00252 
                      00253 ;Se pueden agregar más, respetando la estructura de condicionales
                      00254 
                      00255 ;/////////////////////////////////////////////////////////////////////////////////////
                      00256 
                      00257 
                      00258 
                      00259 ;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
                            \
                      00260 ;\\\\\\\\\\\\\\\\\\\\\Manipulación del cursor solamente para pantallas de 20x4 /////////////////////////
                            ///
                      00261 ;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
                      00262 
                      00263 ir_a_fila macro filaseleccionada
                      00264 
                      00265         if filaseleccionada==1
                      00266                 movlw home_inicio
                      00267                 call ESCRIBIRCOMANDO
                      00268         endif
                      00269         if filaseleccionada==2
                      00270                 movlw home_inicio
                      00271                 call ESCRIBIRCOMANDO
                      00272                 movlw salto_enter
                      00273         call ESCRIBIRCOMANDO
                      00274         endif
                      00275         if filaseleccionada==3
                      00276                 movlw 0x94
                      00277                 call ESCRIBIRCOMANDO
                      00278         endif
                      00279         if filaseleccionada==4
                      00280                 movlw 0xD4
                      00281                 call ESCRIBIRCOMANDO
                      00282         endif
                      00283         if filaseleccionada>4
                      00284                 ERROR "Has sobrepasado la cantidad de filas a usar"
                      00285                 MESSG "Revisa el comando ir_a_fila que el valor sea"
                      00286                 MESSG "de 1 a 4 solamente."
                      00287         endif
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[205]: Found directive in column 1. (endm)
                      00288 endm
                      00289 
                      00290 
                      00291 ; ///////////////////////Comando adicional /////////////////////////////////////////////////////////////
                            ///////////
                      00292 ;/////////////////////////////Para ir a un punto especifico del LCD ////////////////////////////////////
                            //////////
                      00293 ;/////////////////////////////////Solo para LCD20x4 ////////////////////////////////////////////////////
                            //////////
                      00294 lcdfc macro lcdvalorf,lcdvalorc
                      00295 
                      00296         ;/// Para seleccionar la fila
                      00297         if lcdvalorf==1
                      00298         MOVLW lcdvalorc
                      00299         MOVWF ubicacionlcdfcr
                      00300         DECF ubicacionlcdfcr,1
                      00301         MOVlW 0X80
                      00302         ADDWF ubicacionlcdfcr,0
                      00303         call ESCRIBIRCOMANDO
                      00304         endif
                      00305         if lcdvalorf==2
                      00306         MOVLW lcdvalorc
                      00307         MOVWF ubicacionlcdfcr
                      00308         DECF ubicacionlcdfcr,1
                      00309         MOVlW 0XC0
                      00310         ADDWF ubicacionlcdfcr,0
                      00311         call ESCRIBIRCOMANDO
                      00312         endif
                      00313         if lcdvalorf==3
                      00314         MOVLW lcdvalorc
                      00315         MOVWF ubicacionlcdfcr
                      00316         DECF ubicacionlcdfcr,1
                      00317         MOVlW 0X94
                      00318         ADDWF ubicacionlcdfcr,0
                      00319         call ESCRIBIRCOMANDO
                      00320         endif
                      00321         if lcdvalorf==4
                      00322         MOVLW lcdvalorc
                      00323         MOVWF ubicacionlcdfcr
                      00324         DECF ubicacionlcdfcr,1
                      00325         MOVlW 0XD4
                      00326         ADDWF ubicacionlcdfcr,0
                      00327         call ESCRIBIRCOMANDO
                      00328         endif
                      00329         ;Para seleccionar la columna
                      00330 
Warning[205]: Found directive in column 1. (endm)
                      00331 endm
                      00332 
                      00333 ;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\               
                      00334 
                      00335 ;Desde aquí los comandos para manipulación del display //////////////////////////////////////////
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00336 CLEAR_LCD  MACRO                ;Borra todo lo de la pantalla
                      00337         MOVLW limpiar_lcd
                      00338         CALL  ESCRIBIRCOMANDO
                      00339     ENDM
                      00340 borrarfila macro valor
                      00341         lcdfc valor,.1
                      00342         CALL subp4arab0rf1l     
                      00343         lcdfc valor,.1
Warning[205]: Found directive in column 1. (endm)
                      00344 endm               
Warning[207]: Found label after column 1. (desplazaderecha)
                      00345  desplazaderecha  macro                 ;Mueve todo lo escrito en la pantalla 1 a la derecha
                      00346                   movlw  mover_pantalla_derecha
                      00347                   call   ESCRIBIRCOMANDO             
                      00348                   endm
Warning[207]: Found label after column 1. (desplazaizquierda)
                      00349  desplazaizquierda  macro       ;Mueve todo lo escrito en la pantalla 1 a la izquierda         
                      00350                                 movlw  mover_pantalla_izquierda
                      00351                                 call   ESCRIBIRCOMANDO             
                      00352                                 endm
Warning[207]: Found label after column 1. (apagarpantalla)
                      00353  apagarpantalla macro
                      00354                                 movlw apagar_el_display
                      00355                                 call ESCRIBIRCOMANDO
                      00356  endm
                      00357 ONLY_DISPLAY MACRO
                      00358         MOVLW solo_display
                      00359         CALL ESCRIBIRCOMANDO
                      00360     ENDM
                      00361  
                      00362  ;/////////////////////////////////////////////////////////////////////////////////
                      00363  ;/////////////////////////////////////////////////////////////////////////////////
                      00364  ;Para enviar 1 pulso de duración programable
                      00365  ;Requiere de la Librería RETARDOS.ASM
                      00366  
Warning[207]: Found label after column 1. (PULSOSUB)
                      00367  PULSOSUB macro pinp,registrop,duracion
                      00368                 BSF registrop,pinp
                      00369                 milisegundo duracion
                      00370                 BCF registrop,pinp
                      00371  endm
                      00372  ;///////////////////// Operaciones matemáticas //////////////////////////////////
                      00373  ;//////////////////////////////////////////////////////
                      00374 sumarreg macro registro1,registro2
                      00375    movf registro1,0
                      00376    movwf Reg15tr01
                      00377    movf registro2,0
                      00378    movwf Reg15tr02
                      00379    call Separaciondigit05
                      00380    call ParaSumarReg1str0s
Warning[205]: Found directive in column 1. (endm)
                      00381 endm
                      00382 
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00383 restarreg macro registrox1,registrox2; Hay que asegurarse que el registro 1 sea mayor al registro2.
                      00384    movf registrox1,0
                      00385    movwf Reg15tr01
                      00386    movf registrox2,0
                      00387    movwf Reg15tr02
                      00388    call ParaRestarReg1str0s2
Warning[205]: Found directive in column 1. (endm)
                      00389 endm
                      00390  
                      00391 multiplicarreg macro registrom1,registrom2
                      00392    movf registrom1,0
                      00393    movwf Reg15tr01
                      00394    movf registrom2,0
                      00395    movwf Reg15tr02
                      00396    call Separaciondigit05
                      00397    call ParaMultiplicarReg1str0s
Warning[205]: Found directive in column 1. (endm)
                      00398 endm 
                      00399 
                      00400 crearreg macro registroc1,registroc2,registroc3
                      00401    movf registroc1,0
                      00402    movwf Reg15tr01
                      00403    movf registroc2,0
                      00404    movwf Reg15tr02
                      00405    movf registroc3,0
                      00406    movwf Reg15tr03
                      00407    call ParaCrearReg1str0
Warning[205]: Found directive in column 1. (endm)
                      00408 endm
                      00409 
                      00410 ;///////////////////////////////////////////////////////////////////////////////////////////////////////
                            /////
                      00411 ;//////////////////////////////////// Para módulo HC-SR04 //////////////////////////////////////////////
                            /////
                      00412 ;///////////////////////////////////////////////////////////////////////////////////////////////////////
                            /////  
                      00413 
                      00414 iniciar_hcsr04  macro
                      00415         banco 1
                      00416         MOVLW b'00000111' ; Timer 0 como temporizador y escala 256
                      00417         MOVWF OPTION_REG  ; Cargamos la configuración en el TMR0
                      00418         banco 0
                      00419         BCF TRIGGER
                      00420         MOVLW .88 ;Cargamos el valor de ajuste de medida 51.2/58 = 0.88
                      00421          MOVWF Ajust3d1st ;En la variable de ajuste "Ajust3d1st"
Warning[205]: Found directive in column 1. (endm)
                      00422 endm
                      00423 
                      00424 medir_ultrasonico macro Rresulm3edid4
                      00425         CALL Med1rdiist4nc1ia  ;Llama a la subrutina de medición
                      00426         MOVF valaux04,0        ;Extrae el valor de la respuesta en W 
                      00427         MOVWF Rresulm3edid4    ;Guarda la respuesta en el indicador de registro 
Warning[205]: Found directive in column 1. (endm)
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00428 endm
                      00429 
                      00430 ;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
                      00431  ;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ Para teclado 4x4         \\\\\\\\\\\\\\\\\\\\\\\\\\\\
                      00432  ;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
                      00433  
                      00434 iniciar_teclado macro
                      00435         CALL IN1ci0t3cla4do
Warning[205]: Found directive in column 1. (endm)
                      00436 endm
                      00437 
                      00438 leertecla macro
                      00439         BSF Sit3cl4pus,0
                      00440         CALL Tttest3aTecld0o
Warning[205]: Found directive in column 1. (endm)
                      00441 endm
                      00442 
                      00443 irsitecla macro subrutdepulso
                      00444         BCF Sit3cl4pus,0
                      00445         CALL Tttest3aTecld0o
                      00446         MOVF tekl4pul5,0
                      00447         BTFSS Hhayrt3cla,0
                      00448         GOTO subrutdepulso
Warning[205]: Found directive in column 1. (endm)
                      00449 endm
                      00450 
                      00451 llamarsitecla macro subrutdepulso
                      00452         BCF Sit3cl4pus,0
                      00453         CALL Tttest3aTecld0o
                      00454         MOVF tekl4pul5,0
                      00455         BTFSS Hhayrt3cla,0
                      00456         CALL subrutdepulso
Warning[205]: Found directive in column 1. (endm)
                      00457 endm
                      00458 
                      00459 ; ///////////////////////////////-------------------------//////////////////////////////////////////////
                            ////
                      00460 
                      00461 
                      00004 ; CONFIG1
                      00005 ; __config 0x2FC2
2007   2FC2           00006  __CONFIG _CONFIG1, _FOSC_HS & _WDTE_OFF & _PWRTE_ON & _MCLRE_OFF & _CP_OFF & _CPD_OFF & _BOREN_ON & _IE
                            SO_ON & _FCMEN_ON & _LVP_OFF
                      00007 ; CONFIG2
                      00008 ; __config 0x3FFF
2008   3FFF           00009  __CONFIG _CONFIG2, _BOR4V_BOR40V & _WRT_OFF
                      00010  
Warning[207]: Found label after column 1. (START_PASSED)
  00000001            00011  START_PASSED EQU 0x1
                      00012  
                      00013  CBLOCK 0x20
  00000020            00014     IR_FLAGS
  00000021            00015     DIGITO
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000022            00016     TEMP
  00000023            00017     CONTADOR
  00000024            00018     CONTADOR_2
  00000025            00019     REC_BYTE1
  00000026            00020     REC_BYTE2
Warning[205]: Found directive in column 1. (ENDC)
                      00021 ENDC
                      00022 
                      00023     ORG 0
0000   2???           00024     GOTO SETUP
                      00025     ORG 4
0004   2???           00026     GOTO INT_HANDLE
0005                  00027 SETUP:
                      00028     LCD_INIT
0005   2???               M         CALL  Inicio_lcd
0006   2???           00029     CALL IR_INIT
0007                  00030 START:
                      00031     WRITE_LCD 'C'
0007   3043               M         MOVLW 'C'
0008   2???               M         CALL  ESCRIBIRCARACTER  ;Subrutina en la librería que me permite enviar el caracter
                      00032     WRITE_LCD 'O'
0009   304F               M         MOVLW 'O'
000A   2???               M         CALL  ESCRIBIRCARACTER  ;Subrutina en la librería que me permite enviar el caracter
                      00033     WRITE_LCD 'D'
000B   3044               M         MOVLW 'D'
000C   2???               M         CALL  ESCRIBIRCARACTER  ;Subrutina en la librería que me permite enviar el caracter
                      00034     WRITE_LCD 'I'
000D   3049               M         MOVLW 'I'
000E   2???               M         CALL  ESCRIBIRCARACTER  ;Subrutina en la librería que me permite enviar el caracter
                      00035     WRITE_LCD 'G'
000F   3047               M         MOVLW 'G'
0010   2???               M         CALL  ESCRIBIRCARACTER  ;Subrutina en la librería que me permite enviar el caracter
                      00036     WRITE_LCD 'O'
0011   304F               M         MOVLW 'O'
0012   2???               M         CALL  ESCRIBIRCARACTER  ;Subrutina en la librería que me permite enviar el caracter
                      00037     WRITE_LCD ':'
0013   303A               M         MOVLW ':'
0014   2???               M         CALL  ESCRIBIRCARACTER  ;Subrutina en la librería que me permite enviar el caracter
0015   01A3           00038     CLRF CONTADOR
0016   0826           00039     MOVFW REC_BYTE2
0017   00A2           00040     MOVWF TEMP
0018   2???           00041     CALL IMPRIMIR_VAR
0019   0825           00042     MOVFW REC_BYTE1
001A   00A2           00043     MOVWF TEMP
001B   2???           00044     CALL IMPRIMIR_VAR
                      00045     ORIGIN_LCD
001C   3002               M                 movlw home_inicio
001D   2???               M                 call ESCRIBIRCOMANDO
                      00046     ONLY_DISPLAY
001E   300C               M         MOVLW solo_display
001F   2???               M         CALL ESCRIBIRCOMANDO
                      00047     ;CALL IR_RCV
0020                  00048 PRUEBA:
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0020   300D           00049     MOVLW D'13'
0021   0224           00050     SUBWF CONTADOR_2,0
0022   1D03           00051     BTFSS STATUS,Z
0023   2???           00052     GOTO PRUEBA
0024   10A0           00053     BCF IR_FLAGS,START_PASSED
0025   01A4           00054     CLRF CONTADOR_2
0026   1003           00055     BCF STATUS,C
Message[305]: Using default destination of 1 (file).
0027   0CA5           00056     RRF REC_BYTE1
Message[305]: Using default destination of 1 (file).
0028   0CA6           00057     RRF REC_BYTE2
0029   1003           00058     BCF STATUS,C
Message[305]: Using default destination of 1 (file).
002A   0CA5           00059     RRF REC_BYTE1
Message[305]: Using default destination of 1 (file).
002B   0CA6           00060     RRF REC_BYTE2
002C   1003           00061     BCF STATUS,C
Message[305]: Using default destination of 1 (file).
002D   0CA5           00062     RRF REC_BYTE1
Message[305]: Using default destination of 1 (file).
002E   0CA6           00063     RRF REC_BYTE2
002F   1003           00064     BCF STATUS,C
Message[305]: Using default destination of 1 (file).
0030   0DA5           00065     RLF REC_BYTE1
Message[305]: Using default destination of 1 (file).
0031   0DA5           00066     RLF REC_BYTE1
0032   1003           00067     BCF STATUS,C
0033   2???           00068     GOTO START
                      00069 
0034                  00070 IMPRIMIR_VAR:
Message[305]: Using default destination of 1 (file).
0034   0AA3           00071     INCF CONTADOR
0035   3009           00072     MOVLW D'9'
0036   00A1           00073     MOVWF DIGITO
0037   0EA2           00074     SWAPF TEMP,1
0038   0822           00075     MOVFW TEMP
0039   390F           00076     ANDLW 0xF
003A   02A1           00077     SUBWF DIGITO,1
003B   1803           00078     BTFSC STATUS,C
003C   2???           00079     GOTO DECIMAL
003D   2???           00080     GOTO HEXADECIMAL
003E                  00081 DECIMAL:
003E   00A1           00082     MOVWF DIGITO
                      00083     WRITE_LCD_REG DIGITO
003F   3030               M         MOVLW .48
0040   0721               M         ADDWF DIGITO,0
0041   2???               M         CALL  ESCRIBIRCARACTER   ;Subrutina en la librería que me permite enviar el valor
0042   2???           00084     GOTO VERIFICACION
0043                  00085 HEXADECIMAL:
0043   00A1           00086     MOVWF DIGITO
                      00087     WRITE_LCD_REG_HEX DIGITO
0044   3037               M         MOVLW .55
0045   0721               M         ADDWF DIGITO,0
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0046   2???               M         CALL  ESCRIBIRCARACTER   ;Subrutina en la librería que me permite enviar el valor
0047                  00088 VERIFICACION:
0047   3002           00089     MOVLW D'2'
0048   0223           00090     SUBWF CONTADOR,0
0049   1D03           00091     BTFSS STATUS,Z
004A   2???           00092     GOTO IMPRIMIR_VAR
004B   01A3           00093     CLRF CONTADOR
004C   0008           00094     RETURN
                      00095     
004D                  00096 IR_INIT: 
004D   1683           00097     BSF STATUS,RP0
004E   1703           00098     BSF STATUS,RP1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
004F   0188           00099     CLRF ANSEL
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0050   0189           00100     CLRF ANSELH
0051   1683           00101     BSF STATUS,RP0
0052   1303           00102     BCF STATUS,RP1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0053   1406           00103     BSF TRISB,0         ; IR is input
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0054   0188           00104     CLRF TRISD
0055   3043           00105     MOVLW B'01000011'   ;PRESCALLER:16.
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0056   0081           00106     MOVWF OPTION_REG
0057   1283           00107     BCF STATUS,RP0      ; Select memory bank 0
0058   3090           00108     MOVLW B'10010000'
0059   008B           00109     MOVWF INTCON
005A   0188           00110     CLRF PORTD
005B   01A5           00111     CLRF REC_BYTE1
005C   01A6           00112     CLRF REC_BYTE2
005D   01A3           00113     CLRF CONTADOR
005E   01A4           00114     CLRF CONTADOR_2
005F   01A0           00115     CLRF IR_FLAGS
0060   0008           00116     RETURN
                      00117     
0061                  00118 INT_HANDLE:
Message[305]: Using default destination of 1 (file).
0061   0AA4           00119     INCF CONTADOR_2
0062   2???           00120     CALL RETARDO_50MICROS
0063   18A0           00121     BTFSC IR_FLAGS,START_PASSED
0064   2???           00122     GOTO IR_RCV
0065   2???           00123     CALL RETARDO_1200MICROS
0066   2???           00124     CALL RETARDO_1200MICROS
0067   1C06           00125     BTFSS PORTB,0
0068   2???           00126     GOTO VERIFICACION_2
0069   14A0           00127     BSF IR_FLAGS,START_PASSED
006A   2???           00128     GOTO VERIFICACION_2
006B                  00129 IR_RCV:
006B   2???           00130     CALL RETARDO_600MICROS
006C   1806           00131     BTFSC PORTB,0
006D   2???           00132     GOTO UNO
006E                  00133 CERO:
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

006E   1003           00134     BCF STATUS,C
Message[305]: Using default destination of 1 (file).
006F   0CA5           00135     RRF REC_BYTE1
Message[305]: Using default destination of 1 (file).
0070   0CA6           00136     RRF REC_BYTE2
0071   2???           00137     GOTO VERIFICACION_2
0072                  00138 UNO:
0072   1403           00139     BSF STATUS,C
Message[305]: Using default destination of 1 (file).
0073   0CA5           00140     RRF REC_BYTE1
Message[305]: Using default destination of 1 (file).
0074   0CA6           00141     RRF REC_BYTE2
0075                  00142 VERIFICACION_2:
0075   108B           00143     BCF INTCON,INTF
0076   0009           00144     RETFIE
                      00145     
                      00146 ;IR_RCV:
                      00147 ;BEGIN:
                      00148 ;    BTFSC PORTB,4
                      00149 ;    GOTO BEGIN
                      00150 ;    CALL RETARDO_1200MICROS
                      00151 ;    BTFSS PORTB,4
                      00152 ;    GOTO BEGIN
                      00153 ;    CALL RETARDO_600MICROS
                      00154 ;BUCLE:
                      00155 ;    CALL RETARDO_600MICROS
                      00156 ;    BTFSS PORTB,4
                      00157 ;    GOTO UNO
                      00158 ;CERO: 
                      00159 ;    BCF STATUS,C
                      00160 ;    RRF REC_BYTE1
                      00161 ;    RRF REC_BYTE2
                      00162 ;    CALL RETARDO_600MICROS
                      00163 ;    GOTO VERIFICACION_2
                      00164 ;UNO:
                      00165 ;    BSF STATUS,C
                      00166 ;    RRF REC_BYTE1
                      00167 ;    RRF REC_BYTE2
                      00168 ;    CALL RETARDO_1200MICROS
                      00169 ;VERIFICACION_2:
                      00170 ;    INCF CONTADOR,1
                      00171 ;    MOVLW D'11'
                      00172 ;    SUBWF CONTADOR,0
                      00173 ;    BTFSS STATUS,Z
                      00174 ;    GOTO BUCLE
                      00175 ;    RETURN
                      00176 
                      00177 ;RETARDO DE 1.2MS USANDO TIMER0.
0077                  00178 RETARDO_1200MICROS:
0077   110B           00179     BCF INTCON,T0IF
0078   306A           00180     MOVLW D'106'
0079   0081           00181     MOVWF TMR0
007A                  00182 COMPROBAR:
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

007A   1D0B           00183     BTFSS INTCON,T0IF
007B   2???           00184     GOTO COMPROBAR
007C   0008           00185     RETURN
                      00186     
                      00187 ;RETARDO DE 600 MICROS USANDO TIMER0.
007D                  00188 RETARDO_600MICROS:
007D   110B           00189     BCF INTCON,T0IF
007E   30DB           00190     MOVLW D'219'
007F   0081           00191     MOVWF TMR0
0080                  00192 COMPROBAR_2:
0080   1D0B           00193     BTFSS INTCON,T0IF
0081   2???           00194     GOTO COMPROBAR_2
0082   0008           00195     RETURN
                      00196     
                      00197 ;RETARDO DE 50 MICROS USANDO TIMER0.
0083                  00198 RETARDO_50MICROS:
0083   110B           00199     BCF INTCON,T0IF
0084   30FD           00200     MOVLW D'253'
0085   0081           00201     MOVWF TMR0
0086                  00202 COMPROBAR_3:
0086   1D0B           00203     BTFSS INTCON,T0IF
0087   2???           00204     GOTO COMPROBAR_3
0088   0008           00205     RETURN
                      00206     
                      00207     #INCLUDE <RETARDOS.inc>
                      00001 ;::::::::::::: www.rodrigocarita.com ::::::::::::::::::::::::::
                      00002 ;                       Retardos.asm   Versión: 1.0
                      00003 
                      00004 ; Librería de retardos por bucles anidados.
                      00005 ; 
                      00006 ;             Se utiliza con la Macro.inc
                      00007 ; milisegundo .2   -> Genera un retardo de 2 milisegundos
                      00008 ; Segundo .6 -> Genera un retardo de 6 segundos
                      00009 ; Los valores deben estar entre 0 a 255.
                      00010 
                      00011         cblock                          
  00000027            00012         memo_tiemp_1        
  00000028            00013         memo_tiemp_2        
  00000029            00014         memo_tiemp_3        
  0000002A            00015         memo_tiemp_4
                      00016         endc
                      00017 
0089                  00018 milisegundos
0089   00A7           00019          movwf  memo_tiemp_1
Warning[207]: Found label after column 1. (retbucle1)
008A                  00020     retbucle1
008A   3011           00021          movlw  .17
008B   00A8           00022          movwf  memo_tiemp_2 
Warning[207]: Found label after column 1. (retbucle2)
008C                  00023     retbucle2
008C   303A           00024          movlw  .58
008D   00A9           00025          movwf  memo_tiemp_3     
Warning[207]: Found label after column 1. (retbucle3)
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

008E                  00026     retbucle3
008E   0000           00027          nop
008F   0000           00028          nop
0090   0BA9           00029          decfsz memo_tiemp_3,1     
0091   2???           00030          goto   retbucle3
0092   0BA8           00031          decfsz memo_tiemp_2,1
0093   2???           00032          goto   retbucle2
0094   0BA7           00033          decfsz memo_tiemp_1,1
0095   2???           00034          goto   retbucle1
Warning[203]: Found opcode in column 1. (RETURN)
0096   0008           00035 RETURN
0097                  00036 segundos
0097   00A7           00037          movwf  memo_tiemp_1
Warning[207]: Found label after column 1. (retbucle1a)
0098                  00038     retbucle1a
0098   30FA           00039          movlw  .250
0099   00A8           00040          movwf  memo_tiemp_2 
Warning[207]: Found label after column 1. (retbucle2a)
009A                  00041     retbucle2a
009A   30FA           00042          movlw  .250
009B   00A9           00043          movwf  memo_tiemp_3     
Warning[207]: Found label after column 1. (retbucle3a)
009C                  00044     retbucle3a
009C   3013           00045          movlw  .19
009D   00AA           00046          movwf  memo_tiemp_4 
Warning[207]: Found label after column 1. (retbucle4a)
009E                  00047     retbucle4a
009E   0000           00048          nop
009F   0BAA           00049          decfsz memo_tiemp_4,1 
00A0   2???           00050          goto   retbucle4a
00A1   0BA9           00051          decfsz memo_tiemp_3,1    
00A2   2???           00052          goto   retbucle3a
00A3   0BA8           00053          decfsz memo_tiemp_2,1
00A4   2???           00054          goto   retbucle2a
00A5   0BA7           00055          decfsz memo_tiemp_1,1
00A6   2???           00056          goto   retbucle1a
Warning[203]: Found opcode in column 1. (RETURN)
00A7   0008           00057 RETURN
                      00058 
                      00059 
                      00208     #INCLUDE <LCD20X4.inc>
Warning[205]: Found directive in column 1. (CBLOCK)
                      00001 CBLOCK
  0000002B            00002         NumCadena               ;número de la cadena 
  0000002C            00003         indice
  0000002D            00004         memocaracter            
  0000002E            00005         memoriaw
  0000002F            00006         caractertemp
  00000030            00007         ubicacionlcdfcr
  00000031            00008         ubicacionlcdccr
  00000032            00009         Varregcomp
Warning[205]: Found directive in column 1. (ENDC)
                      00010 ENDC
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00011 
  00000008            00012 DATOS EQU PORTD                 ;lineas de datos = portD
  00000008            00013 pinlcd EQU PORTD                ;lineas de control = portD
                      00014 
  00000001            00015 RS EQU 1 ;linea de control RS = bit1
  00000002            00016 RW EQU 2 ;linea de control RW = bit2
  00000003            00017 E EQU 3  ;linea de control E = bit3
                      00018 
  0000000F            00019 on_display_cursor_blink EQU     0FH     ;Activa el display, el cursor y hace parpadear el cursor
  0000000C            00020 solo_display            EQU     0CH     ; Apaga el cursor y su parpadeo Pertenece al comando Display ON/
                            OFF
  00000001            00021 limpiar_lcd             EQU     01H     ; limpia los caracteres de la pantalla
  00000008            00022 apagar_el_display       EQU     08H             ; apaga la pantalla
  000000C0            00023 salto_enter             EQU     0C0H    ; Se dirije a la segunda línea
  00000002            00024 home_inicio             EQU     02H     ; Vuelve al inicio
                      00025 
  00000010            00026 mover_cursor_izquierda  EQU     10H     ; Mueve el cursor a la izquierda
  00000014            00027 mover_cursor_derecha    EQU     14H     ; Mueve el cursor a la derecha
                      00028 
  00000018            00029 mover_pantalla_izquierda        EQU     18H     ; Mueve toda al pantalla a la izquierda
  0000001C            00030 mover_pantalla_derecha          EQU     1CH     ; Mueve toda la pantalla a la derecha
                      00031 
  00000000            00032 off                             EQU  0
  00000001            00033 on                              EQU  1
                      00034 
                      00035 ;//////////////////////////////////////////////////////////////////
                      00036 ; Como la conexión al lcd lo estamos desarrollando mediante 4 hilos,
                      00037 ;Para enviar datos de 8 bits se va a realizar por partes.
                      00038 ;Esta subrutina se encarga de enmascarar el byte para en primer lugar
                      00039 ;A los bits de mayor peso y luego de un impulso en el pin de Enable
                      00040 ;Enviará el segundo.
00A8                  00041 ESCRIBIRCOMANDO:                    ;Subrutina para separar en 2 grupos un byte y enviarlos al controlad
                            or por partes.
00A8   00AD           00042         MOVWF   memocaracter        ;Desde la macro llegamos con un valor en w, ahora lo guardaremos el 
                            registro memocaracter.
00A9   2???           00043         CALL    COMPROBARSIOCUPADO  ;Llamamos a la subrutina que comprueba que el controlador está desoc
                            upado.
00AA   082D           00044         MOVF    memocaracter,w      ;Extraemos en W el valor que guardamos en el registro memocaracter. 
00AB   39F0           00045         ANDLW   b'11110000'         ;El código de enmascaramiento que nos permitirá quedarnos con los 4b
                            its MSB.
00AC   0088           00046         MOVWF   DATOS               ;Guardamos el valor del enmasacaramiento en un registro llamado DATO
                            S.
00AD   1108           00047         BCF     pinlcd,RW           ;Para que el LCD reciba comandos RW se encuentre en 0.
00AE   1088           00048         BCF     pinlcd,RS           ;Otro pin que debemos poner a 0 para que el modulo trabaje en modo c
                            omando.
00AF   0000           00049         NOP                         ;Esperamos un pequeño tiempo 0.2uS.
00B0   1588           00050         BSF     pinlcd,E            ;Realizamos el impulso en el pin de Enable para realizar la transfer
                            encia del Dato.
00B1   0000           00051         NOP                         ;Ancho del impulso 0.2uS.                                   
00B2   1188           00052         BCF     pinlcd,E            ;Fin del impulso. 
00B3   0E2D           00053         SWAPF   memocaracter,w      ;Ahora nos queda extraer los 4LSB, los intercambiamos con los de MSB
                             y almacenamos en W.
00B4   39F0           00054         ANDLW   b'11110000'         ;Volvemos a realizar el enmascaramiento de los 4MSB despues del inte
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            rcambio con swapf.
00B5   0088           00055         MOVWF   DATOS               ;El resultado lo guardamos en el registro DATOS.
00B6   0000           00056         NOP                         ;Esperamos un pequeño tiempo 0.2uS.
00B7   1588           00057         BSF     pinlcd,E            ;Realizamos el impulso en el pin de Enable para enviar la segunda pa
                            rte del comando.
00B8   0000           00058         NOP                         ;Ancho del impulso 0.2uS.
00B9   1188           00059         BCF     pinlcd,E            ;Fin del impulso.
00BA   0008           00060         RETURN                      ;Regresamos a donde nos han llamado.
                      00061 
00BB                  00062 ESCRIBIRCARACTER:                               ;Subrutina para separar en 2 grupos un byte y enviarlos 
                            al controlador por partes.
00BB   00AE           00063         movwf   memoriaw                        ;Posiblemente se llegue a la subrutina con un valor en W
                            , vamos a guardarlo y devolverlo al final.
00BC   00AD           00064         movwf   memocaracter        ;Desde la macro llegamos con un valor en w, ahora lo guardaremos el 
                            registro memocaracter.
00BD   2???           00065         call    COMPROBARSIOCUPADO  ;Llamamos a la subrutina que comprueba que el controlador está desoc
                            upado.
00BE   082D           00066         movf    memocaracter,w      ;Extraemos en W el valor que guardamos en el registro memocaracter. 
                               
00BF   39F0           00067         andlw   b'11110000'         ;El código de enmascaramiento que nos permitirá quedarnos con los 4b
                            its MSB.
00C0   0088           00068         movwf   DATOS                   ;Guardamos el valor del enmasacaramiento en un registro llamado 
                            DATOS.
00C1   1108           00069         bcf     pinlcd,RW               ;Para que el LCD reciba datos RW se encuentre en 0.
00C2   1488           00070         bsf     pinlcd,RS               ;Pin que debemos poner a 1 para que el modulo trabaje en modo vi
                            sualización. 
00C3   0000           00071         nop                                                     ;Esperamos un pequeño tiempo 0.2uS.
00C4   1588           00072         bsf     pinlcd,E                ;Realizamos el impulso en el pin de Enable para realizar la tran
                            sferencia del Dato.
00C5   0000           00073         nop                                                     ;Ancho del impulso 0.2uS.
00C6   1188           00074         bcf     pinlcd,E                        ;Fin del impulso.       
00C7   0E2D           00075         swapf   memocaracter,w          ;Ahora nos queda extraer los 4LSB, los intercambiamos con los de
                             MSB y almacenamos en W.
00C8   39F0           00076         andlw   b'11110000'             ;Volvemos a realizar el enmascaramiento de los 4MSB despues del 
                            intercambio con swapf.
00C9   0088           00077         movwf   DATOS                   ;El resultado lo guardamos en el registro DATOS.
00CA   1108           00078         bcf     pinlcd,RW               ;Aseguramos que el pin RW se encuenre en 0 para empezar a recibi
                            r datos.
00CB   1488           00079         bsf     pinlcd,RS               ;Aseguramos que el Pin RS se encuentre en modo visualización. (r
                            ecibe caracteres).
00CC   0000           00080         nop                                                     ;Esperamos un pequeño tiempo 0.2uS.
00CD   1588           00081         bsf     pinlcd,E                ;Realizamos el impulso en el pin de Enable para realizar la tran
                            sferencia del Dato.
00CE   0000           00082         nop                                                     ;Ancho del impulso 0.2uS.
00CF   1188           00083         bcf     pinlcd,E                        ;Fin del impulso
00D0   082E           00084         movf    memoriaw,W                      ;Finalizada la subrutina devolvemos el valor de W para q
                            ue no modifique el proceso
00D1   0008           00085         RETURN                                          ;Fin de la subrutina
                      00086         
00D2                  00087 COMPROBARSIOCUPADO:                             ;Subrutina Testeará la bandera de Busy para saber si el 
                            controlador del módulo está ocupado.
                      00088         SEL_BANK 1                                      ;Vamos al banco 1 para cambiar los pines D4 a D7
                             como entrada, por ahi recibiremos el dato
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M         IF 1==0
                          M         BCF STATUS, RP0
                          M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 1==1
00D2   1683               M         BSF STATUS, RP0
00D3   1303               M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 1==2
                          M         BCF STATUS, RP0
                          M         BSF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 1==3
                          M         BSF STATUS, RP0
                          M         BSF STATUS, RP1
                          M         ENDIF
00D4   30F0           00089         movlw   b'11110000'                     ;Pines D4 a D7 como entrada
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00D5   0088           00090         movwf   TRISD                           ;Conectados al puerto D
                      00091         SEL_BANK 0                                      ;Volvemos al banco 0 para realizar el testeo
                          M         IF 0==0
00D6   1283               M         BCF STATUS, RP0
00D7   1303               M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 0==1
                          M         BSF STATUS, RP0
                          M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 0==2
                          M         BCF STATUS, RP0
                          M         BSF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 0==3
                          M         BSF STATUS, RP0
                          M         BSF STATUS, RP1
                          M         ENDIF
00D8   1088           00092         bcf     pinlcd,RS               ;Configuramos el controlador en modo Comando
00D9   1508           00093         bsf     pinlcd,RW               ;Configuramos el LCD para que nos envie datos.
00DA   0000           00094         nop                                                     ;Esperamos un pequeño tiempo 0.2uS
00DB   1588           00095         bsf     pinlcd,E                ;Activamos el pin de Enable para que empiece la transferencia y 
                            el módulo nos responda.
00DC   0000           00096         nop                                                     ;Esperamos un prqueño tiempo de 0.2uS
00DD   0808           00097         movf    DATOS,W                 ;Extrae el valor del registro DATOS (4msb) y lo guarda en W está
                             es la primera respuesta
00DE   1188           00098         bcf     pinlcd,E                ;Apagamos el pin de Enable para leer los 4lsb restantes.
00DF   39F0           00099         andlw   0F0h                    ;La respuesta anterior la enmascaramos
00E0   00AF           00100         movwf   caractertemp            ;Almacenamos el caracter temporalmente
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00E1   0000           00101         nop                                                     ;Esperamos un pequeño tiempo            
                                                    
00E2   1588           00102         bsf     pinlcd,E                        ;Activamos el pin de Enable para que comience la transfe
                            rencia.
00E3   0000           00103         nop                                                     ;Esperamos otro pequeño tiempo
00E4   0E08           00104         swapf   DATOS,w                 ;Leemos la respuesta y lo intercambiamos con los 4msb para guard
                            arlo en W
00E5   1188           00105         bcf     pinlcd,E                ;Apagamos la transferencia.
00E6   390F           00106         andlw   00Fh                    ;Enmascaramos la segunda respuesta
00E7   04AF           00107         iorwf   caractertemp,1      ;Combina nibbles Juntamos la primera con la segunda respuesta para f
                            ormar la respuesta gral
00E8   1BAF           00108         btfsc   caractertemp,7      ;Comprobamos el pin 7 de la respuesta, esta es la bandera de busy, s
                            i se encuentra en 1=ocupado
00E9   2???           00109         goto    COMPROBARSIOCUPADO  ;Si la respuesta es ocupado repetiremos todo el proceso denuevo
00EA   1108           00110         bcf     pinlcd,RW               ;Si la respuesta es desocupado Continuamos, en este caso apagamo
                            s el bit de intercambio de datos
                      00111         SEL_BANK 1                                      ;Vamos al banco 1 para dejar las cosas como esta
                            ban antes
                          M         IF 1==0
                          M         BCF STATUS, RP0
                          M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 1==1
00EB   1683               M         BSF STATUS, RP0
00EC   1303               M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 1==2
                          M         BCF STATUS, RP0
                          M         BSF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 1==3
                          M         BSF STATUS, RP0
                          M         BSF STATUS, RP1
                          M         ENDIF
00ED   3000           00112         movlw   0x00                            ;Ahora todos los pines como Salida
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00EE   0088           00113         movwf   TRISD                           ;Del puerto D
                      00114         SEL_BANK        0                                       ;Vamos al banco 0
                          M         IF 0==0
00EF   1283               M         BCF STATUS, RP0
00F0   1303               M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 0==1
                          M         BSF STATUS, RP0
                          M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 0==2
                          M         BCF STATUS, RP0
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M         BSF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 0==3
                          M         BSF STATUS, RP0
                          M         BSF STATUS, RP1
                          M         ENDIF
00F1   0008           00115         RETURN                                          ;Salimos de la subrutina
                      00116 
00F2                  00117 Inicio_lcd:                                             ; Esta es la subrutina de secuencia para iniciar
                             el LCD
                      00118         SEL_BANK 0                                          ; Nos dirijimos al banco 0 para manipular pi
                            nes
                          M         IF 0==0
00F2   1283               M         BCF STATUS, RP0
00F3   1303               M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 0==1
                          M         BSF STATUS, RP0
                          M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 0==2
                          M         BCF STATUS, RP0
                          M         BSF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 0==3
                          M         BSF STATUS, RP0
                          M         BSF STATUS, RP1
                          M         ENDIF
00F4   1188           00119         bcf     pinlcd,E                                ; Apagamos el pin de E
00F5   1108           00120         bcf     pinlcd,RW                               ; Apagamos el pin de RW
00F6   1088           00121         bcf     pinlcd,RS                               ; Apagamos el pin de RS
00F7   300F           00122         movlw   0x0F                            ; Encendemos los pines del LCD
00F8   0088           00123         movwf   DATOS                           ; En el puerto D
                      00124 
                      00125         SEL_BANK 1                                          ; Vamos al banco 1
                          M         IF 1==0
                          M         BCF STATUS, RP0
                          M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 1==1
00F9   1683               M         BSF STATUS, RP0
00FA   1303               M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 1==2
                          M         BCF STATUS, RP0
                          M         BSF STATUS, RP1
                          M         ENDIF
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M 
                          M         IF 1==3
                          M         BSF STATUS, RP0
                          M         BSF STATUS, RP1
                          M         ENDIF
00FB   300F           00126         movlw B'00001111'       ;Declaramos Todos los pines como salida 
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00FC   0088           00127         movwf TRISD                             ;Del puerto D
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00FD   1188           00128         bcf     TRISD,E                                 ;Aseguramos que el Pin E sea salida     
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00FE   1108           00129         bcf     TRISD,RW                                ;Aseguramos que el pin RW sea salida
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00FF   1088           00130         bcf     TRISD,RS                                ;Aseguramos que el pin RS sea salida
                      00131         SEL_BANK 0                                      ;Regresamos al banco 0
                          M         IF 0==0
0100   1283               M         BCF STATUS, RP0
0101   1303               M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 0==1
                          M         BSF STATUS, RP0
                          M         BCF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 0==2
                          M         BCF STATUS, RP0
                          M         BSF STATUS, RP1
                          M         ENDIF
                          M 
                          M         IF 0==3
                          M         BSF STATUS, RP0
                          M         BSF STATUS, RP1
                          M         ENDIF
                      00132 
                      00133 ; ///////////Comienza la secuencia de inicialización de la pantalla LCD//////////////////////
                      00134         milisegundo .20                         ;Despues de encendido tengo que esperar un tiempo mayor 
                            a 15ms
0102   3014               M                          movlw .20
0103   2???               M                          call  milisegundos
0104   3030           00135         movlw   B'00110000'             ;Primer valor pedido por el fabricante
0105   0088           00136         movwf   DATOS                           ;Lo escribimos en el Puerto D
0106   0000           00137         nop                                                     ;Esperamos un pequeño tiempo
0107   1588           00138         bsf     pinlcd,E                ;Enviamos un impulso al pin de Enable para enviar el dato
0108   0000           00139         nop                                                     ;Ancho del impulso 0,2 uS
0109   1188           00140         bcf     pinlcd,E                        ;Fin del impulso        
                      00141         milisegundo .10                         ;Antes de pasar al siguiente paso debo esperar más de 5m
                            s
010A   300A               M                          movlw .10
010B   2???               M                          call  milisegundos
010C   3030           00142         movlw   B'00110000'             ;Segundo valor pedido por el fabricante
010D   0088           00143         movwf   DATOS                   ;Lo escribimos en el Puerto D
010E   0000           00144         nop                                                     ;Esperamos un pequeño tiempo
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

010F   1588           00145         bsf     pinlcd,E                ;Enviamos un impulso al pin de Enable para enviar el dato
0110   0000           00146         nop                                                     ;Ancho del impulso 0,2 uS
0111   1188           00147         bcf     pinlcd,E                        ;Fin del impulso        
0112   3030           00148         movlw   B'00110000'             ;Tercer valor pedido por el fabricante
0113   0088           00149         movwf   DATOS                   ;Lo escribimos en el Puerto D
0114   0000           00150         nop                                                     ;Esperamos un pequeño tiempo
0115   1588           00151         bsf     pinlcd,E                ;Enviamos un impulso al pin de Enable para enviar el dato
0116   0000           00152         nop                                                     ;Ancho del impulso 0,2 uS
0117   1188           00153         bcf     pinlcd,E                        ;Fin del impulso
                      00154         milisegundo .2                          ;Antes de pasar al siguiente paso debo esperar más de 10
                            0uS
0118   3002               M                          movlw .2
0119   2???               M                          call  milisegundos
011A   3020           00155         movlw   B'00100000'                     ;Cargamos comando de configuración de comunicación de 4b
                            its
011B   0088           00156         movwf   DATOS                           ;Escribimos el comando en el puerto D
011C   0000           00157         nop                                                     ;Esperamos un tiempo antes de realizar l
                            a transferencia
011D   1588           00158         bsf     pinlcd,E                ;Enviamos un impulso al pin de Enable para enviar el dato
011E   0000           00159         nop                                                     ;Ancho del impulso 0,2 uS
011F   1188           00160         bcf     pinlcd,E                        ;Fin del impulso
                      00161 
0120   3028           00162         movlw   B'00101000'     ;Interfaz de 4 bits, 2 lineas
0121   2???           00163         call    ESCRIBIRCOMANDO         ; de caracteres de 5x7
                      00164         
0122   300F           00165         movlw   on_display_cursor_blink     ;FH Display on, cursor on,blink
0123   2???           00166         call    ESCRIBIRCOMANDO
                      00167         
0124   3001           00168         movlw   limpiar_lcd             ; Limpia el LCD
0125   2???           00169         call    ESCRIBIRCOMANDO
                      00170         
0126   3006           00171         movlw   B'00000110'     ; Configura para que cada que se escriba un caracter cursor aumente en 1
0127   2???           00172         call    ESCRIBIRCOMANDO         
                      00173         
0128   3080           00174         movlw   B'10000000'     ; Vamos a HOME
0129   2???           00175         call    ESCRIBIRCOMANDO
012A   0008           00176         RETURN
                      00177 
                      00178 ;//////////////////////////////////////////// Tablas para posición de coordenadas //////////////////////
                            ///
                      00179 ;///////////////////////////////////////////////////////////////////////////////////////////////////////
                            ///
                      00180 ;//////////////////////////////////////////////////////////////
                      00181 ;///// Comandos para escribir en el LCD un registro de 3 dígitos
                      00182 
012B                  00183 PARAESCR1B1RREGISTRO:           ;título de subrutina
012B   00B2           00184         MOVWF Varregcomp                        ;Guarda el valor de ingreso en un Registro
                      00185         BCD_CONVERT Varregcomp  ;Separa en 3 registros (dígitos)el valor
012C   0832               M         MOVF Varregcomp,0
012D   2???               M         CALL BINARIO_BCD
                      00186         
                      00187         ;Para valores inferiores a 10
012E   300A           00188         MOVLW d'10'           ;Carga el valor de 10 en una variable    
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

012F   0232           00189         SUBWF Varregcomp,0    ;De comparación.
0130   1C03           00190         BTFSS STATUS,C        ;El resultado es de 1 dígito?
0131   2???           00191         GOTO UND1G            ;Caso verdadero subrutina para escribir 1 digito
0132   3064           00192         MOVLW d'100'          ;Carga el valor de 100 en una variable
0133   0232           00193         SUBWF Varregcomp,0    ;De comparación 
0134   1C03           00194         BTFSS STATUS,C        ;El resultado es de dos digitos?
0135   2???           00195         GOTO D0SDIG           ;Caso verdadero subrutina de escribir 2 digitos
0136   30FF           00196         MOVLW d'255'          ;Carga el valor de 100 en una
0137   0232           00197         SUBWF Varregcomp,0        ;En una variable de comparación       
0138   1C03           00198         BTFSS STATUS,C            ;El resultado es mayor a 200?
0139   2???           00199         GOTO TRESD1G          ;Caso falso. Va a la subrutina de escribir 3 dig   
013A                  00200 FUERALIM1T3:           ;título de finalización de subrutina
013A   0008           00201         RETURN           ; <------- El return está ahí
013B                  00202 UND1G:             ;Subrutina para escribir 1 dígito
                      00203         WRITE_LCD ' '           ;Escribe 2 espacios 
013B   3020               M         MOVLW ' '
013C   2???               M         CALL  ESCRIBIRCARACTER  ;Subrutina en la librería que me permite enviar el caracter
                      00204         WRITE_LCD ' '
013D   3020               M         MOVLW ' '
013E   2???               M         CALL  ESCRIBIRCARACTER  ;Subrutina en la librería que me permite enviar el caracter
                      00205         WRITE_LCD_REG BCD_UNIDAD ;Escribe el digito
013F   3030               M         MOVLW .48
0140   0733               M         ADDWF BCD_UNIDAD,0
0141   2???               M         CALL  ESCRIBIRCARACTER   ;Subrutina en la librería que me permite enviar el valor
0142   2???           00206         GOTO FUERALIM1T3       ;Se va a finalizar la subrutina 
0143                  00207 D0SDIG:                 ;Subrutina para escribir 2 dígitos 
                      00208         WRITE_LCD ' '           ;Escribe un espacio  
0143   3020               M         MOVLW ' '
0144   2???               M         CALL  ESCRIBIRCARACTER  ;Subrutina en la librería que me permite enviar el caracter
                      00209         WRITE_LCD_REG BCD_DECENA ;Escribe el penúltimo digito
0145   3030               M         MOVLW .48
0146   0734               M         ADDWF BCD_DECENA,0
0147   2???               M         CALL  ESCRIBIRCARACTER   ;Subrutina en la librería que me permite enviar el valor
                      00210         WRITE_LCD_REG BCD_UNIDAD ;Escribe el último digito
0148   3030               M         MOVLW .48
0149   0733               M         ADDWF BCD_UNIDAD,0
014A   2???               M         CALL  ESCRIBIRCARACTER   ;Subrutina en la librería que me permite enviar el valor
014B   2???           00211         GOTO FUERALIM1T3       ;Se va a finalizar la subrutina
014C                  00212 TRESD1G:                ;Subrutina para escribir 3 dígitos
                      00213         WRITE_LCD_REG BCD_CENTENA;Escribe el antepenúltimo digito
014C   3030               M         MOVLW .48
014D   0735               M         ADDWF BCD_CENTENA,0
014E   2???               M         CALL  ESCRIBIRCARACTER   ;Subrutina en la librería que me permite enviar el valor
                      00214         WRITE_LCD_REG BCD_DECENA ;Escribe el penúltimo digito
014F   3030               M         MOVLW .48
0150   0734               M         ADDWF BCD_DECENA,0
0151   2???               M         CALL  ESCRIBIRCARACTER   ;Subrutina en la librería que me permite enviar el valor
                      00215         WRITE_LCD_REG BCD_UNIDAD ;Escribe el penúltimo digito
0152   3030               M         MOVLW .48
0153   0733               M         ADDWF BCD_UNIDAD,0
0154   2???               M         CALL  ESCRIBIRCARACTER   ;Subrutina en la librería que me permite enviar el valor
0155   2???           00216         GOTO FUERALIM1T3       ;Se va a finalizar la subrutina 
                      00217 ;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00218 ;\\\\\\\\\\\\\\\\\\\\\\\Subrutina para borrar fila \\\\\\\\\\\\\\\\\
                      00219 
0156                  00220 subp4arab0rf1l:
                      00221         MOV_VAL .16,indice
0156   3010               M         MOVLW .16
0157   00AC               M         MOVWF indice
                      00222         WRITE_LCD ' '
0158   3020               M         MOVLW ' '
0159   2???               M         CALL  ESCRIBIRCARACTER  ;Subrutina en la librería que me permite enviar el caracter
015A   0BAC           00223         DECFSZ indice,1
015B   2???           00224         GOTO $-2        
015C   0008           00225         RETURN
                      00226 ;................... Descarga la actualizaciones en: www.rodrigocarita.com      
                      00227         
                      00228 
                      00209     #INCLUDE <BCD.INC>
                      00001     CBLOCK
  00000033            00002     BCD_UNIDAD
  00000034            00003     BCD_DECENA
  00000035            00004     BCD_CENTENA
                      00005     ENDC
                      00006 
015D                  00007 BINARIO_BCD:
015D   00B3           00008     MOVWF  BCD_UNIDAD    ;Carga el número binario a convertir
015E   01B5           00009     CLRF   BCD_CENTENA    ;Borra registro
015F   01B4           00010     CLRF   BCD_DECENA     ;Borra registro
0160                  00011 BCD_RESTA10:
0160   300A           00012     MOVLW  .10             ;A las unidades de les va restando
0161   0233           00013     SUBWF  BCD_UNIDAD,0  ;10 en cada pasada 
0162   1C03           00014     BTFSS  STATUS,C        ;C=0? si- entonces bcd_unidad>=0
0163   2???           00015     GOTO   BIN_BCD_Fin     ;No- entonces se acabo  
0164                  00016 BCD_INC_DECENAS:     
0164   00B3           00017     MOVWF  BCD_UNIDAD    ;Recupera lo que queda por restar
0165   0AB4           00018     INCF   BCD_DECENA,1   ;Incrementa las decenas 
0166   300A           00019     MOVLW  .10
0167   0234           00020     SUBWF  BCD_DECENA,0   ;Comprueba si a llegado a 10
0168   1C03           00021     BTFSS  STATUS,C        ;C=1? si- entonces bcd_decena>=0 
0169   2???           00022     GOTO   BCD_RESTA10     ;No- entonces resta 10 a las unidades
016A                  00023 BCD_INC_CENTENAS:
016A   01B4           00024     CLRF   BCD_DECENA     ;Pone a cero las decenas
016B   0AB5           00025     INCF   BCD_CENTENA,1  ;Incrementa las centenas
016C   2???           00026     GOTO   BCD_RESTA10     ;Resta 10 al número a convertir
016D                  00027 BIN_BCD_Fin:
016D   0E34           00028     SWAPF  BCD_DECENA,0   ;Intercambia nibles
016E   0733           00029     ADDWF  BCD_UNIDAD,0  ;Nible bajo=unidades / Nible alto=decenas
016F   0008           00030     RETURN
                      00031 
                      00032 
                      00033 
                      00034 
2FC2 3FFF             00210     END
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 26


SYMBOL TABLE
  LABEL                             VALUE 

ABDEN                             00000000
ABDOVF                            00000007
ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
ANS0                              00000000
ANS1                              00000001
ANS10                             00000002
ANS11                             00000003
ANS12                             00000004
ANS13                             00000005
ANS2                              00000002
ANS3                              00000003
ANS4                              00000004
ANS5                              00000005
ANS6                              00000006
ANS7                              00000007
ANS8                              00000000
ANS9                              00000001
ANSEL                             00000188
ANSELH                            00000189
BAUDCTL                           00000187
BCD_CENTENA                       00000035
BCD_CONVERT                       
BCD_DECENA                        00000034
BCD_INC_CENTENAS                  0000016A
BCD_INC_DECENAS                   00000164
BCD_RESTA10                       00000160
BCD_UNIDAD                        00000033
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BINARIO_BCD                       0000015D
BIN_BCD_Fin                       0000016D
BRG0                              00000000
BRG1                              00000001
BRG10                             00000002
BRG11                             00000003
BRG12                             00000004
BRG13                             00000005
BRG14                             00000006
BRG15                             00000007
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 27


SYMBOL TABLE
  LABEL                             VALUE 

BRG16                             00000003
BRG2                              00000002
BRG3                              00000003
BRG4                              00000004
BRG5                              00000005
BRG6                              00000006
BRG7                              00000007
BRG8                              00000000
BRG9                              00000001
BRGH                              00000002
C                                 00000000
C1CH0                             00000000
C1CH1                             00000001
C1IE                              00000005
C1IF                              00000005
C1OE                              00000005
C1ON                              00000007
C1OUT                             00000006
C1POL                             00000004
C1R                               00000002
C1RSEL                            00000005
C1SEN                             00000005
C2CH0                             00000000
C2CH1                             00000001
C2IE                              00000006
C2IF                              00000006
C2OE                              00000005
C2ON                              00000007
C2OUT                             00000006
C2POL                             00000004
C2R                               00000002
C2REN                             00000004
C2RSEL                            00000004
C2SYNC                            00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 28


SYMBOL TABLE
  LABEL                             VALUE 

CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CERO                              0000006E
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CHS3                              00000005
CKE                               00000006
CKP                               00000004
CLEAR_LCD                         
CM1CON0                           00000107
CM2CON0                           00000108
CM2CON1                           00000109
COMPROBAR                         0000007A
COMPROBARSIOCUPADO                000000D2
COMPROBAR_2                       00000080
COMPROBAR_3                       00000086
CONTADOR                          00000023
CONTADOR_2                        00000024
COPY_REG                          
CREN                              00000004
CSRC                              00000007
CURSOR_LEFT                       
CURSOR_OFF                        
CURSOR_ON                         
D                                 00000005
D0SDIG                            00000143
DATA_ADDRESS                      00000005
DATOS                             00000008
DC                                00000001
DC1B0                             00000004
DC1B1                             00000005
DC2B0                             00000004
DC2B1                             00000005
DECIMAL                           0000003E
DIGITO                            00000021
D_A                               00000005
D_NOT_A                           00000005
E                                 00000003
ECCPAS                            0000009C
ECCPAS0                           00000004
ECCPAS1                           00000005
ECCPAS2                           00000006
ECCPASE                           00000007
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDAT                             0000010C
EEDATA                            0000010C
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 29


SYMBOL TABLE
  LABEL                             VALUE 

EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
ESCRIBIRCARACTER                  000000BB
ESCRIBIRCOMANDO                   000000A8
F                                 00000001
FERR                              00000002
FSR                               00000004
FUERALIM1T3                       0000013A
FVREN                             00000000
GCEN                              00000007
GIE                               00000007
GO                                00000001
GO_DONE                           00000001
GO_NOT_DONE                       00000001
HEXADECIMAL                       00000043
HTS                               00000002
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IMPRIMIR_VAR                      00000034
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
INT_HANDLE                        00000061
IOCB                              00000096
IOCB0                             00000000
IOCB1                             00000001
IOCB2                             00000002
IOCB3                             00000003
IOCB4                             00000004
IOCB5                             00000005
IOCB6                             00000006
IOCB7                             00000007
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRP                               00000007
IR_FLAGS                          00000020
IR_INIT                           0000004D
IR_RCV                            0000006B
Inicio_lcd                        000000F2
LCD_INIT                          
LTS                               00000001
MC1OUT                            00000007
MC2OUT                            00000006
MOV_VAL                           
MSK                               00000093
MSK0                              00000000
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 30


SYMBOL TABLE
  LABEL                             VALUE 

MSK1                              00000001
MSK2                              00000002
MSK3                              00000003
MSK4                              00000004
MSK5                              00000005
MSK6                              00000006
MSK7                              00000007
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000001
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
NumCadena                         0000002B
OERR                              00000001
OFF                               
ON                                
ONLY_DISPLAY                      
OPTION_REG                        00000081
ORIGIN_LCD                        
OSCCON                            0000008F
OSCTUNE                           00000090
OSFIE                             00000007
OSFIF                             00000007
OSTS                              00000003
P                                 00000004
P1M0                              00000006
P1M1                              00000007
PARAESCR1B1RREGISTRO              0000012B
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PDC0                              00000000
PDC1                              00000001
PDC2                              00000002
PDC3                              00000003
PDC4                              00000004
PDC5                              00000005
PDC6                              00000006
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 31


SYMBOL TABLE
  LABEL                             VALUE 

PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PRSEN                             00000007
PRUEBA                            00000020
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSSAC0                            00000002
PSSAC1                            00000003
PSSBD0                            00000000
PSSBD1                            00000001
PSTRCON                           0000009D
PULSOSUB                          
PULSR                             00000002
PULSS                             00000003
PWM1CON                           0000009B
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RA6                               00000006
RA7                               00000007
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIDL                             00000006
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 32


SYMBOL TABLE
  LABEL                             VALUE 

RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
RE3                               00000003
READ_WRITE                        00000002
REC_BYTE1                         00000025
REC_BYTE2                         00000026
REG_EQUAL_JMP                     
REG_NE_JMP                        
REG_VAL_EQ_JMP                    
REG_VAL_NEQ_JMP                   
RETARDO_1200MICROS                00000077
RETARDO_50MICROS                  00000083
RETARDO_600MICROS                 0000007D
RP0                               00000005
RP1                               00000006
RS                                00000001
RSEN                              00000001
RW                                00000002
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SBOREN                            00000004
SCKP                              00000004
SCS                               00000000
SEL_BANK                          
SEN                               00000000
SENDB                             00000003
SETF                              
SETUP                             00000005
SMP                               00000007
SPBRG                             00000099
SPBRGH                            0000009A
SPEN                              00000007
SR0                               00000006
SR1                               00000007
SRCON                             00000185
SREN                              00000005
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 33


SYMBOL TABLE
  LABEL                             VALUE 

SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPMSK                            00000093
SSPOV                             00000006
SSPSTAT                           00000094
START                             00000007
START_PASSED                      00000001
STATUS                            00000003
STRA                              00000000
STRB                              00000001
STRC                              00000002
STRD                              00000003
STRSYNC                           00000004
SWDTEN                            00000000
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1GINV                            00000007
T1GIV                             00000007
T1GSS                             00000001
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TEMP                              00000022
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1GE                            00000006
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 34


SYMBOL TABLE
  LABEL                             VALUE 

TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRESD1G                           0000014C
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
TRISA7                            00000007
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRISE3                            00000003
TRMT                              00000001
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 35


SYMBOL TABLE
  LABEL                             VALUE 

TUN3                              00000003
TUN4                              00000004
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
ULPWUE                            00000005
ULPWUIE                           00000002
ULPWUIF                           00000002
UND1G                             0000013B
UNO                               00000072
VCFG0                             00000004
VCFG1                             00000005
VERIFICACION                      00000047
VERIFICACION_2                    00000075
VR0                               00000000
VR1                               00000001
VR2                               00000002
VR3                               00000003
VRCON                             00000097
VREN                              00000007
VROE                              00000006
VRR                               00000005
VRSS                              00000004
Varregcomp                        00000032
W                                 00000000
WCOL                              00000007
WDTCON                            00000105
WDTPS0                            00000001
WDTPS1                            00000002
WDTPS2                            00000003
WDTPS3                            00000004
WPUB                              00000095
WPUB0                             00000000
WPUB1                             00000001
WPUB2                             00000002
WPUB3                             00000003
WPUB4                             00000004
WPUB5                             00000005
WPUB6                             00000006
WPUB7                             00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
WRITE_LCD                         
WRITE_LCD_REG                     
WRITE_LCD_REG_HEX                 
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 36


SYMBOL TABLE
  LABEL                             VALUE 

WUE                               00000001
Z                                 00000002
_.org_1_015B                      0000015B
_BOR21V                           00003EFF
_BOR40V                           00003FFF
_BOR4V_BOR21V                     00003EFF
_BOR4V_BOR40V                     00003FFF
_BOREN_NSLEEP                     00003EFF
_BOREN_OFF                        00003CFF
_BOREN_ON                         00003FFF
_BOREN_SBODEN                     00003DFF
_BOR_NSLEEP                       00003EFF
_BOR_OFF                          00003CFF
_BOR_ON                           00003FFF
_BOR_SBODEN                       00003DFF
_CONFIG1                          00002007
_CONFIG2                          00002008
_CPD_OFF                          00003FFF
_CPD_ON                           00003F7F
_CP_OFF                           00003FFF
_CP_ON                            00003FBF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         00001FFF
_DEVID1                           00002006
_EC_OSC                           00003FFB
_EXTRC                            00003FFF
_EXTRCIO                          00003FFE
_EXTRC_OSC_CLKOUT                 00003FFF
_EXTRC_OSC_NOCLKOUT               00003FFE
_FCMEN_OFF                        000037FF
_FCMEN_ON                         00003FFF
_FOSC_EC                          00003FFB
_FOSC_EXTRC_CLKOUT                00003FFF
_FOSC_EXTRC_NOCLKOUT              00003FFE
_FOSC_HS                          00003FFA
_FOSC_INTRC_CLKOUT                00003FFD
_FOSC_INTRC_NOCLKOUT              00003FFC
_FOSC_LP                          00003FF8
_FOSC_XT                          00003FF9
_HS_OSC                           00003FFA
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_IESO_OFF                         00003BFF
_IESO_ON                          00003FFF
_INTOSC                           00003FFD
_INTOSCIO                         00003FFC
_INTRC_OSC_CLKOUT                 00003FFD
_INTRC_OSC_NOCLKOUT               00003FFC
_LP_OSC                           00003FF8
_LVP_OFF                          00002FFF
_LVP_ON                           00003FFF
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 37


SYMBOL TABLE
  LABEL                             VALUE 

_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FEF
_WDTE_OFF                         00003FF7
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FF7
_WDT_ON                           00003FFF
_WRT_1FOURTH                      00003BFF
_WRT_256                          00003DFF
_WRT_HALF                         000039FF
_WRT_OFF                          00003FFF
_XT_OSC                           00003FF9
__16F887                          00000001
apagar_el_display                 00000008
apagarpantalla                    
borrarfila                        
caractertemp                      0000002F
crearreg                          
cursor_derecha                    
desplazaderecha                   
desplazaizquierda                 
enviaradisplay                    
enviarcdisplay                    
escribirmensaje                   
escribirregistro                  
fila_enter                        
home_inicio                       00000002
indice                            0000002C
iniciar_hcsr04                    
iniciar_teclado                   
ir_a_fila                         
irsitecla                         
lcdfc                             
leertecla                         
limpiar_lcd                       00000001
llamarsitecla                     
mayorque                          
mayorquereg                       
medir_ultrasonico                 
memo_tiemp_1                      00000027
memo_tiemp_2                      00000028
memo_tiemp_3                      00000029
memo_tiemp_4                      0000002A
memocaracter                      0000002D
memoriaw                          0000002E
menorque                          
menorquereg                       
mensaje                           
milisegundo                       
milisegundos                      00000089
mover_cursor_derecha              00000014
mover_cursor_izquierda            00000010
MPASM 5.86                      RECEPTOR.ASM   9-23-2020  11:37:03         PAGE 38


SYMBOL TABLE
  LABEL                             VALUE 

mover_pantalla_derecha            0000001C
mover_pantalla_izquierda          00000018
multiplicarreg                    
off                               00000000
on                                00000001
on_display_cursor_blink           0000000F
on_lib_retardos_ms                
pinlcd                            00000008
puertoa                           00000005
puertob                           00000006
puertoc                           00000007
puertod                           00000008
puertoe                           00000009
registroadisplay                  
registrocdisplay                  
restarreg                         
retardo_ms                        
retbucle1                         0000008A
retbucle1a                        00000098
retbucle2                         0000008C
retbucle2a                        0000009A
retbucle3                         0000008E
retbucle3a                        0000009C
retbucle4a                        0000009E
salto_enter                       000000C0
segundo                           
segundos                          00000097
solo_display                      0000000C
subp4arab0rf1l                    00000156
sumarreg                          
ubicacionlcdccr                   00000031
ubicacionlcdfcr                   00000030

Errors   :     0
Warnings :    44 reported,     0 suppressed
Messages :    25 reported,     0 suppressed

